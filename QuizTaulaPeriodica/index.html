<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Repte de la taula peri√≤dica</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
</head>
<body>
  <div class="app-shell">
    <header class="top-banner">
      <div class="banner-content">
        <h1>Repte de la taula peri√≤dica</h1>
        <p>Encerta 10 elements seguits abans que s‚Äôesgoti el temps</p>
      </div>
      <div class="header-extras">
        <div class="branding-badge">
          <span class="sparkle">‚ú®</span>
          <span>Encerta'n 10 seguits!</span>
        </div>
        <div class="header-actions">
          <button type="button" class="circle-trigger" id="open-instructions" aria-label="Mostra les instruccions del joc" aria-haspopup="dialog" aria-controls="instructions-modal">
            <span aria-hidden="true">?</span>
            <span class="sr-only">Instruccions del joc</span>
          </button>
          <button type="button" class="circle-trigger" id="open-leaderboard" aria-label="Mostra el r√†nquing" aria-haspopup="dialog" aria-controls="leaderboard-modal">
            <span aria-hidden="true">üèÜ</span>
            <span class="sr-only">R√†nquing</span>
          </button>
        </div>
      </div>
    </header>

    <main class="game-layout">
      <section class="control-panel">
        <div class="card">
          <h2>Configuraci√≥ inicial</h2>
          <form id="start-form" class="start-form">
            <label class="input-group">
              <span>Nom i cognom</span>
              <input type="text" id="player-name" name="playerName" placeholder="Nom i cognom" required>
            </label>

            <div class="input-group">
              <span>Nivell de dificultat</span>
              <div class="difficulty-buttons" id="difficulty-buttons">
                <button type="button" class="difficulty-btn" data-difficulty="very-easy">Molt f√†cil</button>
                <button type="button" class="difficulty-btn" data-difficulty="easy">F√†cil</button>
                <button type="button" class="difficulty-btn" data-difficulty="normal">Normal</button>
                <button type="button" class="difficulty-btn" data-difficulty="hard">Dif√≠cil</button>
                <button type="button" class="difficulty-btn" data-difficulty="very-hard">Molt dif√≠cil</button>
              </div>
              <input type="hidden" id="difficulty" name="difficulty" required>
            </div>

            <button type="submit" class="primary-btn" id="start-btn">Comen√ßa el repte</button>
          </form>
        </div>

        <div class="card info-card" id="status-card" hidden>
          <h2>Estat de la partida</h2>
          <div class="status-grid">
            <div>
              <span class="label">Jugador/a</span>
              <span class="value" id="status-player">‚Äì</span>
            </div>
            <div>
              <span class="label">Nivell</span>
              <span class="value" id="status-level">‚Äì</span>
            </div>
            <div>
              <span class="label">Temps restant</span>
              <span class="value timer" id="status-timer">00:00</span>
            </div>
            <div>
              <span class="label">Temps total</span>
              <span class="value" id="status-total">00:00</span>
            </div>
          </div>
        </div>

        <div class="card feedback-card" id="feedback-card" hidden>
          <h2>Feedback</h2>
          <p id="feedback-message">Endavant, tria l‚Äôelement correcte!</p>
        </div>

        <div class="attribution-card">
          <p class="attribution-text">Aplicaci√≥ realitzada per Felip Sarroca amb assist√®ncia de la IA i a partir d'una idea d'E. Boixader.</p>
          <p class="license-text">
            Obra sota llic√®ncia <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.ca" target="_blank" rel="noopener noreferrer">CC BY-SA 4.0</a>
            
          </p>
        </div>
      </section>

      <section class="play-area">
        <div class="table-wrapper" id="table-wrapper">
          <div class="spotlight-card" id="spotlight" hidden>
            <span class="prompt-label">Quin element √©s aquest?</span>
            <span class="element-name" id="target-element-name">‚Äì</span>
          </div>
          <div class="table-overlay" id="table-overlay">
            <p>Tria un nivell per veure els elements del repte.</p>
          </div>
          <div class="periodic-table" id="periodic-table"></div>
        </div>
      </section>

      <div class="card streak-card" id="streak-card" hidden>
        <h2>Ratxa d‚Äôencerts</h2>
        <div class="streak-track" id="streak-track"></div>
        <p class="tip">Recorda: un error i haur√†s de comen√ßar de nou!</p>
      </div>
    </main>
  </div>

  <div class="modal" id="instructions-modal" hidden>
    <div class="modal-content instructions">
      <div class="modal-header">
        <h2>Com funciona el repte</h2>
        <button class="close-btn" id="close-instructions" aria-label="Tanca">√ó</button>
      </div>
      <div class="modal-body">
        <ul class="instructions-list">
          <li><span class="instruction-icon" aria-hidden="true">üìù</span>Introdueix el teu nom i cognoms i escull el nivell de dificultat.</li>
          <li><span class="instruction-icon" aria-hidden="true">üîç</span>Observa el s√≠mbol ressaltat i tria l'element correcte: cal encertar-ne 10 seguits.</li>
          <li><span class="instruction-icon" aria-hidden="true">‚è±Ô∏è</span>El temps √©s limitat, aix√≠ que intenta completar la ratxa el m√©s r√†pid possible.</li>
          <li><span class="instruction-icon" aria-hidden="true">üì§</span>Si acabes en nivell normal o dif√≠cil, podr√†s enviar els resultats perqu√® quedin registrats.</li>
        </ul>
        <p class="instructions-tip"><span class="instruction-tip-icon" aria-hidden="true">üí°</span><span>Comen√ßa pels nivells m√©s assequibles i augmenta la dificultat a mesura que guanyis destresa.</span></p>
      </div>
    </div>
  </div>

  <div class="modal" id="leaderboard-modal" hidden>
    <div class="modal-content leaderboard-modal">
      <div class="modal-header">
        <h2><span class="modal-title-icon" aria-hidden="true">üèÜ</span>R√†nquing</h2>
        <button class="close-btn" id="close-leaderboard" aria-label="Tanca">√ó</button>
      </div>
      <div class="modal-body">
        <p class="leaderboard-hint">Temps m√©s r√†pid per nivell (mm:ss).</p>
        <div class="leaderboard-grid" id="leaderboard-grid" aria-live="polite"></div>
        <p class="leaderboard-empty" id="leaderboard-empty" hidden>Encara no hi ha registres disponibles.</p>
        <button type="button" class="text-btn leaderboard-refresh" id="refresh-leaderboard">Actualitza</button>
      </div>
    </div>
  </div>

  <div class="modal" id="result-modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Enhorabona!</h2>
        <button class="close-btn" id="close-modal" aria-label="Tanca">√ó</button>
      </div>
      <div class="modal-body">
        <p id="modal-text">Has completat el repte amb 10 encerts seguits. Vols enviar el teu resultat?</p>
        <div class="modal-actions">
          <button class="primary-btn" id="send-results">Enviar resultats üì§</button>
          <button class="secondary-btn" id="close-modal-2">No, gr√†cies ‚ùå</button>
        </div>
        <p class="modal-status" id="submission-status"></p>
      </div>
    </div>
  </div>

  <template id="element-template">
    <button class="element-cell" type="button">
      <span class="atomic-number"></span>
      <span class="symbol"></span>
      <span class="name"></span>
    </button>
  </template>

  <script type="module" src="app.js"></script>
</body>
</html>
